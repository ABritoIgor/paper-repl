?sample
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[2],thetas_grid),])
as
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[2],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[2],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[2],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[2],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[2],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[2],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[2],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[2],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[2],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[2],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[2],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[2],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[2],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[2],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[2],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[2],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[2],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[2],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[2],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[2],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[2],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[2],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[2],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[2],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[2],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[2],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[2],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[2],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[4],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[4],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[4],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[4],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[4],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[4],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[4],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[4],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[4],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[4],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[4],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[6],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[6],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[6],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[6],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[6],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[6],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[6],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[6],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[6],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[6],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[8],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[8],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[8],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[8],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[8],thetas_grid),])
sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[8],thetas_grid),])
start <- thetas_grid[5]
simulated_ar <- rep(0,N)
simulated_ar[1] <- start
for (i in 2:N) {
simulated_ar[i] <- sample(thetas_grid,size = 1,replace = F,prob = markov[match(simulated_ar[i-1],thetas_grid),])
}
simulated_ar
lines(x,simulated_ar,col = 'red')
getwd()
getwd()
remotes::install_github(repo = "rfsaldanha/brclimr", ref = "arrow")
library(brclimr)
pr <- fetch_data(
code_muni = 3303401,
product = "brdwgd",
indicator = "pr",
statistics = "sum",
date_start = as.Date("2010-01-01"),
date_end = as.Date("2012-01-01")
)
View(pr)
unique(pr$code_muni)
lenght(unique(pr$code_muni))
length(unique(pr$code_muni))
library(sf)
data <- st_read("C:\Users\igorb\Desktop\sig_belfordroxo_rj\Suscetibilidade\Inundacao_A.shp")
data <- st_read("C:\\Users\\igorb\\Desktop\\sig_belfordroxo_rj\\Suscetibilidade\\Inundacao_A.shp")
names(data)
class(data)
head(Data$GEOMETRIA)
head(data$GEOMETRIA)
test = data$MUNICIPIO
head(test)
lapply(data, head)
head(data$CLASSE)
table(data$CLASSE)
install.packages("haven")
library(haven)
census60 <- read_dta("C:\\Users\\igorb\\Desktop\\EPGE\\Education\\Data\\SteYan2014\\data_programs_AER-2012-1082\\cens1960ext_aer.dta")
View(census60)
schoolinglaws_sy <- read_dta("C:\\Users\\igorb\\Desktop\\EPGE\\Education\\Data\\SteYan2014\\data_programs_AER-2012-1082\\schooling_laws_sy.dta")
View(schoolinglaws_sy)
schoolquality <- read_dta("C:\\Users\\igorb\\Desktop\\EPGE\\Education\\Data\\SteYan2014\\data_programs_AER-2012-1082\\ck_school_quality_revised.dta")
View(schoolquality)
library(tidyverse)
library(ggplot2)
library(plm)
library(systemfit)
library(estimatr)
library(modelsummary)
library(fixest)
library(stargazer)
library(haven)
cens1960ext <- read_dta("cens1960ext_aer.dta") # Extract of IPUMS 1960 Census 1% sample microdata.
cens1970ext <- read_dta("cens1970ext_aer.dta") # Extract of both IPUMS 1970 Census 1% state samples microdata.
cens1980ext <- read_dta("cens1980ext_aer.dta") # Extract of IPUMS 1980 Census 5% sample microdata.
schooling_laws_aa <- read_dta("schooling_laws_aa.dta") # Acemoglu and Angrist (2000) schooling law variables.
schooling_laws_sy <- read_dta("schooling_laws_sy.dta") # Schooling law created by the researchers.
ck_school_quality_revised <- read_dta("ck_school_quality_revised.dta") # Card and Krueguer school quality measures aggregated as by birth cohort and extended to earlier and later cohorts.
# Creating the CCA measure that corrects the CA
schooling_laws_aa <- schooling_laws_aa %>% # Foot note 12
mutate(cca  = ifelse(req_sch > 0,pmin(drop_age - enrolage,req_sch,na.rm = T),drop_age - enrolage))
schooling_laws_aa$cca <- ifelse(is.na(schooling_laws_aa$cca),0,schooling_laws_aa$cca) # Adding 0s instead of NAs
# Cleaning the 1960 census data
cens1960clean <- cens1960ext %>%
filter(age > 24, age < 55, # Desired age range
race == 1, # Selecting only whites
bpl != 15, bpl != 2,bpl <= 56) # Selecting only native born individuals, excluding Alaska and Hawaii
# Cleaning the 1970 census data
cens1970clean <- cens1970ext %>%
filter(age > 24, age < 55, # Desired age range
race == 1, # Selecting only whites
bpl != 15, bpl != 2,bpl <= 56) # Selecting only native born individuals, excluding Alaska and Hawaii
# Cleaning the 1980 census data
cens1980clean <- cens1980ext %>%
filter(age > 24, age < 55, # Desired age range
race == 1, # Selecting only whites
bpl != 15, bpl != 2,bpl <= 56) # Selecting only native born individuals, excluding Alaska and Hawaii
# Removing one column to use the rbind() function
cens1980_adj <- cens1980clean %>%
select(!c(wkswork1))
# Stacking all the censuses
census <- rbind(cens1960clean,cens1970clean,cens1980_adj)
# Creating the adjusted weight for the census data
census <- census %>%
mutate(adjwt = slwt / sum(slwt))
# Adding the RS measure to the census data
colnames(schooling_laws_sy) <- c("bpl","birthyr","rs") # Renaming the columns to match the census names
census <- left_join(census,schooling_laws_sy,by = c("bpl","birthyr"))
# Adding the CA,CL and CCA measure to the census data
schooling_laws_aa <- schooling_laws_aa %>% # Adding birth year information
mutate(birthyr = yearat14 - 14)
colnames(schooling_laws_aa)[1] <- "bpl" # Renaming bpl
census <- left_join(census,schooling_laws_aa[,c(1,8:11)],by = c("bpl","birthyr"))
# Plotting the density
par(mfrow = c(2,2))
ggplot(census) +
geom_bar(aes(x = rs,weight = adjwt),fill = "red",just = 2,width = 0.2)+
geom_bar(aes(x = cl,weight = adjwt),fill = "blue",just = 1,width = 0.2)+
geom_bar(aes(x = ca,weight = adjwt),fill = "green",just = 0,width = 0.2)+
geom_bar(aes(x = cca,weight = adjwt),fill = "yellow",just = -1,width = 0.2)
View(census)
census40to49 <- census %>%
filter(age <= 49 ,age >= 40)
census40to49 <- census %>%
filter(age <= 49 ,age >= 40,
sex == 1)
View(census40to49)
census40to49 <- census %>%
filter(age < 49 ,age > 40,
sex == 1)
census40to49 <- census %>%
filter(age <= 49 ,age > 40,
sex == 1)
census40to49 <- census %>%
filter(age < 49 ,age >= 40,
sex == 1)
census40to49 <- census %>%
filter(age <= 49 ,age >= 40,
sex == 1)
census40to49 <- census %>%
filter(age <= 49 ,age >= 40,
sex == 1,
empstat != 0)
census40to49 <- census %>%
filter(age <= 49 ,age >= 40,
sex == 1,
incwage != 0)
census40to49 <- census %>%
filter(age <= 49 ,age > 40,
sex == 1,
incwage != 0)
census40to49 <- census %>%
filter(age < 49 ,age >= 40,
sex == 1,
incwage != 0)
census40to49 <- census %>%
filter(age <= 49 ,age >= 40,
sex == 1,
incwage != 0)
census40to49 <- census %>%
filter(age <= 49 ,age >= 40,
sex == 1,
incwage != 0,
wkswork2 != 0)
census40to49 <- census %>%
filter(age <= 49 ,age >= 40,
sex == 1,
incwage != 0,
wkswork2 != 0,
higrade <= 17)
census40to49 <- census %>%
filter(age <= 49 ,age >= 40,
sex == 1,
higrade <= 17)
census40to49 <- census %>%
filter(age <= 49 ,age >= 40,
sex == 1,
incwage > 0)
census40to49 <- census %>%
filter(age <= 49 ,age >= 40,
sex == 1,
incwage > 0,
statefip != 2 | 15)
census40to49 <- census %>%
filter(age <= 49 ,age >= 40,
sex == 1,
incwage > 0,
statefip != 2 )
census40to49 <- census %>%
filter(age <= 49 ,age >= 40,
sex == 1,
incwage > 0,
statefip != 2, statefip != 15 )
census40to49 <- census %>%
filter(age <= 49 ,age >= 40,
sex == 1,
incwage > 0,
occscore != 0,
statefip != 2, statefip != 15 )
summary(census40to49$higrade)
summary(census40to49$birthyr)
census40to49 <- census %>%
filter(age < 49 ,age >= 40,
sex == 1,
incwage > 0,
occscore != 0,
statefip != 2, statefip != 15 ) # Excluding people living in Alaska and Hawaii
summary(census40to49$birthyr)
census40to49 <- census %>%
filter(age <= 49 ,age > 40,
sex == 1,
incwage > 0,
occscore != 0,
statefip != 2, statefip != 15 ) # Excluding people living in Alaska and Hawaii
summary(census40to49$birthyr)
View(cens1960clean)
cens1960ext <- read_dta("cens1960ext_aer.dta") # Extract of IPUMS 1960 Census 1% sample microdata.
cens1970ext <- read_dta("cens1970ext_aer.dta") # Extract of both IPUMS 1970 Census 1% state samples microdata.
cens1980ext <- read_dta("cens1980ext_aer.dta") # Extract of IPUMS 1980 Census 5% sample microdata.
schooling_laws_aa <- read_dta("schooling_laws_aa.dta") # Acemoglu and Angrist (2000) schooling law variables.
schooling_laws_sy <- read_dta("schooling_laws_sy.dta") # Schooling law created by the researchers.
ck_school_quality_revised <- read_dta("ck_school_quality_revised.dta") # Card and Krueguer school quality measures
schooling_laws_aa <- schooling_laws_aa %>% # Foot note 12
mutate(cca  = ifelse(req_sch > 0,pmin(drop_age - enrolage,req_sch,na.rm = T),drop_age - enrolage))
schooling_laws_aa$cca <- ifelse(is.na(schooling_laws_aa$cca),0,schooling_laws_aa$cca) # Adding 0s instead of NAs
# Cleaning the 1960 census data
cens1960clean <- cens1960ext %>%
filter(age > 24, age < 55, # Desired age range
race == 1, # Selecting only whites
bpl != 15, bpl != 2,bpl <= 56, # Selecting only native born individuals, excluding Alaska and Hawaii
statefip != 15, statefip != 2, # Excluding people living in Alaska and Hawaii
incwage > 0, occscore > 0)
# Cleaning the 1970 census data
cens1970clean <- cens1970ext %>%
filter(age > 24, age < 55, # Desired age range
race == 1, # Selecting only whites
bpl != 15, bpl != 2,bpl <= 56, # Selecting only native born individuals, excluding Alaska and Hawaii
statefip != 15, statefip != 2,
incwage > 0, occscore > 0)
# Cleaning the 1980 census data
cens1980clean <- cens1980ext %>%
filter(age > 24, age < 55, # Desired age range
race == 1, # Selecting only whites
bpl != 15, bpl != 2,bpl <= 56, # Selecting only native born individuals, excluding Alaska and Hawaii
statefip != 15, statefip != 2,
incwage > 0, occscore > 0)
# Removing one column to use the rbind() function
cens1980_adj <- cens1980clean %>%
select(!c(wkswork1))
# Stacking all the censuses
census <- rbind(cens1960clean,cens1970clean,cens1980_adj)
# Creating the adjusted weight for the census data
census <- census %>%
mutate(adjwt = slwt / sum(slwt))
# Adding the RS measure to the census data
colnames(schooling_laws_sy) <- c("bpl","birthyr","rs") # Renaming the columns to match the census names
census <- left_join(census,schooling_laws_sy,by = c("bpl","birthyr"))
# Adding the CA,CL and CCA measure to the census data
schooling_laws_aa <- schooling_laws_aa %>% # Adding birth year information
mutate(birthyr = yearat14 - 14)
colnames(schooling_laws_aa)[1] <- "bpl" # Renaming bpl
census <- left_join(census,schooling_laws_aa[,c(1,8:11)],by = c("bpl","birthyr"))
# Plotting the density
par(mfrow = c(2,2))
ggplot(census) +
geom_bar(aes(x = rs,weight = adjwt),fill = "red",just = 2,width = 0.2)+
geom_bar(aes(x = cl,weight = adjwt),fill = "blue",just = 1,width = 0.2)+
geom_bar(aes(x = ca,weight = adjwt),fill = "green",just = 0,width = 0.2)+
geom_bar(aes(x = cca,weight = adjwt),fill = "yellow",just = -1,width = 0.2)
# Creating the CCA measure that corrects the CA
schooling_laws_aa <- schooling_laws_aa %>% # Foot note 12
mutate(cca  = ifelse(req_sch > 0,pmin(drop_age - enrolage,req_sch,na.rm = T),drop_age - enrolage))
schooling_laws_aa$cca <- ifelse(is.na(schooling_laws_aa$cca),0,schooling_laws_aa$cca) # Adding 0s instead of NAs
# Cleaning the 1960 census data
cens1960clean <- cens1960ext %>%
filter(age > 24, age < 55, # Desired age range
race == 1, # Selecting only whites
bpl != 15, bpl != 2,bpl <= 56)
# Cleaning the 1970 census data
cens1970clean <- cens1970ext %>%
filter(age > 24, age < 55, # Desired age range
race == 1, # Selecting only whites
bpl != 15, bpl != 2,bpl <= 56)
# Cleaning the 1980 census data
cens1980clean <- cens1980ext %>%
filter(age > 24, age < 55, # Desired age range
race == 1, # Selecting only whites
bpl != 15, bpl != 2,bpl <= 56)
# Removing one column to use the rbind() function
cens1980_adj <- cens1980clean %>%
select(!c(wkswork1))
# Stacking all the censuses
census <- rbind(cens1960clean,cens1970clean,cens1980_adj)
# Creating the adjusted weight for the census data
census <- census %>%
mutate(adjwt = slwt / sum(slwt))
# Adding the RS measure to the census data
colnames(schooling_laws_sy) <- c("bpl","birthyr","rs") # Renaming the columns to match the census names
census <- left_join(census,schooling_laws_sy,by = c("bpl","birthyr"))
# Adding the CA,CL and CCA measure to the census data
schooling_laws_aa <- schooling_laws_aa %>% # Adding birth year information
mutate(birthyr = yearat14 - 14)
colnames(schooling_laws_aa)[1] <- "bpl" # Renaming bpl
census <- left_join(census,schooling_laws_aa[,c(1,8:11)],by = c("bpl","birthyr"))
# Plotting the density
par(mfrow = c(2,2))
ggplot(census) +
geom_bar(aes(x = rs,weight = adjwt),fill = "red",just = 2,width = 0.2)+
geom_bar(aes(x = cl,weight = adjwt),fill = "blue",just = 1,width = 0.2)+
geom_bar(aes(x = ca,weight = adjwt),fill = "green",just = 0,width = 0.2)+
geom_bar(aes(x = cca,weight = adjwt),fill = "yellow",just = -1,width = 0.2)
d_prime <- function(e){
0.3*e
}
c_tilde_prime <- function(e){
30 - e
}
c_prime <- function(e){
20 - e
}
x <- seq(0,30,0.1)
30/1.3
20/1.3
SC <- function(e,t){
(20*e - (e^2)/2 + t*e) + (0.15*(e^2))
}
SC(15.4,4.6)
SC(20,0)
SC(13,7)
SC(13,0)
SC(15.4,0)
x <- seq(0,30,0.1)
y <- SC(x,0)
plot(x,y,type = "l")
y <- SC(x,4.6)
plot(x,y,type = "l")
y <- SC(x,7)
plot(x,y,type = "l")
SC <- function(e,t){
(-20*e + (e^2)/2 + t*e) + (0.15*(e^2))
}
x <- seq(0,30,0.1)
y <- SC(x,4.6)
plot(x,y,type = "l")
SC(15.4,4.6)
SC(20,0)
SC(13,7)
SC(15.4,0)
SC(13)
SC(13,0)
SC(13,7)
SC(15.4,4.6)
SC(20,0)
c <- function(e){
-20*e + (e^2)/2
}
x <- seq(0,30,0.1)
y1 <- c(x)
plot(x,y1,type = "l")
y <- SC(x,0)
plot(x,y,type = "l")
setwd("C:/Users/igorb/Desktop/EPGE/Education/education-thesis/Replication Exercise/Replication")
install.packages("data.table")
library(tidyverse)
library(ggplot2)
library(plm)
library(systemfit)
library(estimatr)
library(modelsummary)
library(fixest)
library(stargazer)
library(haven)
library(lmtest)
library(AER)
library(sandwich)
library(car)
library(tibble)
library(data.table)
library(recipes)
library(multiwayvcov)
library(fastDummies)
census_40to49 <- fread("census_40to49.rds")
View(census_40to49)
?fread
census_40to49 <- readRDS("census_40to49.rds")
gc()
gc()
View(census_40to49)
X <- cbind(1,census_40to49$year)
X <- cbind(1,census_40to49[5])
X <- cbind(1,census_40to49[5])
X <- as.matrix(cbind(1,census_40to49[5]))
X
colnames(census_40to49)
X <- as.matrix(cbind(1,census_40to49[9],census_40to49[46:93],census_40to49[99:127]))
W <- census_40to49$slwt
W <- as.matrix(census_40to49$slwt)
Y <- as.matrix(census_40to49$lnwkwage)
beta <- solve(t(X)%*%W%*%X)%*%(t(X)%*%W%*%Y)
(t(X)%*%W%*%Y)
X <- as.matrix(cbind(1,census_40to49$gradcap)
X <- as.matrix(cbind(1,census_40to49$gradcap))
W <- as.matrix(census_40to49$slwt)
Y <- as.matrix(census_40to49$lnwkwage)
beta <- solve(t(X)%*%W%*%X)%*%(t(X)%*%W%*%Y)
X <- (cbind(1,census_40to49$gradcap))
W <- (census_40to49$slwt)
Y <- (census_40to49$lnwkwage)
beta <- solve(t(X)%*%W%*%X)%*%(t(X)%*%W%*%Y)
X <- cbind(1,census_40to49$gradcap)
X <- cbind(census_40to49$gradcap)
Y <- (census_40to49$lnwkwage)
W <- (census_40to49$slwt)
Y <- (census_40to49$lnwkwage)
beta <- solve(t(X)%*%W%*%X)%*%(t(X)%*%W%*%Y)
?solve
(t(X)%*%W%*%Y)
solve(t(X)%*%W%*%X)
(t(X)%*%W%*%X)%*%(t(X)%*%W%*%Y)
X <- cbind(census_40to49$gradcap,census_40to49$age)
W <- (census_40to49$slwt)
Y <- (census_40to49$lnwkwage)
beta <- solve(t(X)%*%W%*%X)%*%(t(X)%*%W%*%Y)
solve(t(X)%*%W%*%X)
solve(t(X)%*%X)
solve(t(X)%*%W%*%X)
?diag
solve(t(X)%*%diag(W)%*%X)%*%(t(X)%*%diag(W)%*%Y)
t(X)%*%diag(W)%*%X
memory.limit()
X <- cbind(census_40to49$gradcap)
W <- (census_40to49$slwt)
Y <- (census_40to49$lnwkwage)
beta <- solve(t(X)%*%diag(W)%*%X)%*%(t(X)%*%diag(W)%*%Y)
rm("X","Y","W")
gc()
# Fixed effects to be used in the regressions
state_fe <- c(colnames(census_40to49)[46:93])
yob_fe_40to49 <- c(colnames(census_40to49)[99:127])
# OLS Estimation for the first column
col1_ols <- lm(reformulate(c("gradcap",state_fe,yob_fe_40to49),
response = "lnwkwage"),
weights = slwt,
data = census_40to49)
coeftest(col1_ols,vcovCL,cluster = census_40to49$yob_bplg)
rm("col1_ols","census_40to49")
gc()
census_whites_male <- readRDS("census_whites_male.rds")
yob_fe <- c(colnames(census_whites_male)[94:142])
interactions_complete <- c(colnames(census_whites_male)[148:294])
instruments <- c(colnames(census_whites_male)[37:39])
# 1st Stage
col3_1st_stage <- lm(reformulate(c(instruments,"age","age2","age3","age4","census70","census80",state_fe,yob_fe),
response = "gradcap"),
weights = slwt,
data = census_whites_male)
summary(col3_1st_stage)
rm(col3_1st_stage)
gc()
col4_1st_stage <- lm(reformulate(c(instruments,"age","age2","age3","age4","census70","census80",
state_fe,yob_fe,interactions_complete),
response = "gradcap"),
weights = slwt,
data = census_whites_male)
gc()
col4_1st_stage <- lm(gradcap ~ ny7 + ny8 + ny9 + age + age2 + age3 + age4 + census70 + census80 +
factor(yob) + factor(bplg) + factor(yob):southern_born + factor(yob):western_born+
factor(yob):midwestern_born,
weights = slwt,
data = census_whites_male)
summary(col4_1st_stage)
gc()
setwd("~/GitHub/paper-replication/Replication S&Y2014")
